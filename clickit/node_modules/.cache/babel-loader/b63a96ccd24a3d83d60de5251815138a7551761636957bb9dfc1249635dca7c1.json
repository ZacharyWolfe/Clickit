{"ast":null,"code":"import { current } from '@reduxjs/toolkit';\nimport { ADD_CART_ITEM, CLEAR_CART, PROMO_CODE_APPLIED, REMOVE_CART_ITEM } from '../actions/cart';\nconst initialState = {\n  items: new Map(),\n  tax: 0,\n  runningTotalWithoutTax: 0\n};\n\n/// eslint-disable-next-line\nexport default ((state = initialState, action) => {\n  var _state$items$get2;\n  switch (action.type) {\n    case ADD_CART_ITEM:\n      const sku = action.payload;\n      const currentState = state;\n      if (current.items && state.items.has(sku)) {\n        var _state$items$get;\n        return {\n          ...state,\n          items: state.items.set(sku, (_state$items$get = state.items.get(sku)) !== null && _state$items$get !== void 0 ? _state$items$get : 1 + 1)\n        };\n      }\n      return {\n        ...state,\n        items: {\n          ...state.items.set(action.payload, 1)\n        },\n        runningTotalWithoutTax: state.runningTotalWithoutTax + action.payload.price\n      };\n    case REMOVE_CART_ITEM:\n      return {\n        ...state,\n        items: new Map([...Array.from(state.items), [action.payload, (_state$items$get2 = state.items.get(action.payload)) !== null && _state$items$get2 !== void 0 ? _state$items$get2 : 0 - 1]]),\n        runningTotalWithoutTax: state.runningTotalWithoutTax === 0 ? 0 : state.runningTotalWithoutTax - action.payload.price\n      };\n    case CLEAR_CART:\n      return {\n        ...state,\n        items: new Map(),\n        runningTotalWithoutTax: 0\n      };\n    case PROMO_CODE_APPLIED:\n      return {\n        ...state,\n        runningTotalWithoutTax: state.runningTotalWithoutTax - fetchPromoCodeDiscount(action.payload)\n      };\n    default:\n      return state;\n  }\n});\nexport function fetchPromoCodeDiscount(arg) {\n  const promoCodes = new Map([['10OFF', 10], ['20OFF', 20], ['30OFF', 30], ['40OFF', 40], ['50OFF', 50], ['60OFF', 60], ['70OFF', 70], ['80OFF', 80], ['90OFF', 90], ['100OFF', 100], ['110OFF', 110]]);\n  if (arg in promoCodes) {\n    return promoCodes.get(arg);\n  }\n  return 0.0;\n}","map":{"version":3,"names":["current","ADD_CART_ITEM","CLEAR_CART","PROMO_CODE_APPLIED","REMOVE_CART_ITEM","initialState","items","Map","tax","runningTotalWithoutTax","state","action","_state$items$get2","type","sku","payload","currentState","has","_state$items$get","set","get","price","Array","from","fetchPromoCodeDiscount","arg","promoCodes"],"sources":["/Users/zacharywolfe/Desktop/ClickitV2/clickitv2/src/reducers/cart.ts"],"sourcesContent":["import { current, UnknownAction } from '@reduxjs/toolkit'\nimport { ADD_CART_ITEM, CLEAR_CART, PROMO_CODE_APPLIED, REMOVE_CART_ITEM } from '../actions/cart'\n\nexport interface Sku {\n    id: string\n    name: string\n    image?: string\n    size: number\n    price: number\n    colorway: string\n    skuStringID?: string\n    gender: string\n    brandName: string\n    laces: boolean\n    condition: boolean\n    bestSeller: boolean\n    manufacturer?: string\n}\n\ninterface shoppingCartState {\n    items: Map<Sku, number>\n    tax: number\n    runningTotalWithoutTax: number\n}\n\nconst initialState: shoppingCartState = {\n    items: new Map<Sku, number>(),\n    tax: 0,\n    runningTotalWithoutTax: 0,\n}\n\n/// eslint-disable-next-line\nexport default (\n    state = initialState,\n    action: UnknownAction,\n): shoppingCartState => {\n    switch (action.type) {\n        case ADD_CART_ITEM:\n            const sku = action.payload as Sku\n            const currentState = state\n            if (current.items && state.items.has(sku)){\n                return {\n                    ...state,\n                    items: state.items.set(sku, (state.items.get(sku)) ?? 1 + 1)\n                }\n            }\n            return {\n                ...state,\n                items: {\n                    ...state.items.set(action.payload as Sku, 1),\n                },\n                runningTotalWithoutTax:\n                    state.runningTotalWithoutTax +\n                    (action.payload as Sku).price,\n            }\n        case REMOVE_CART_ITEM:\n            return {\n                ...state,\n                items: new Map([\n                    ...Array.from(state.items),\n                    [\n                        action.payload as Sku,\n                        state.items.get(action.payload as Sku) ?? 0 - 1,\n                    ],\n                ]),\n                runningTotalWithoutTax:\n                    state.runningTotalWithoutTax === 0\n                        ? 0\n                        : state.runningTotalWithoutTax -\n                          (action.payload as Sku).price,\n            }\n        case CLEAR_CART:\n            return {\n                ...state,\n                items: new Map<Sku, number>(),\n                runningTotalWithoutTax: 0,\n            }\n        case PROMO_CODE_APPLIED:\n            return {\n                ...state,\n                runningTotalWithoutTax:\n                    state.runningTotalWithoutTax -\n                    fetchPromoCodeDiscount(action.payload as string),\n            }\n        default:\n            return state\n    }\n}\n\nexport function fetchPromoCodeDiscount(arg: string): number {\n    const promoCodes = new Map<string, number>([\n        ['10OFF', 10],\n        ['20OFF', 20],\n        ['30OFF', 30],\n        ['40OFF', 40],\n        ['50OFF', 50],\n        ['60OFF', 60],\n        ['70OFF', 70],\n        ['80OFF', 80],\n        ['90OFF', 90],\n        ['100OFF', 100],\n        ['110OFF', 110],\n    ])\n\n    if (arg in promoCodes) {\n        return promoCodes.get(arg) as number\n    }\n\n    return 0.0\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}