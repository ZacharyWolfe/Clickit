{"ast":null,"code":"import { updateProfile, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut } from 'firebase/auth';\nimport { auth } from '../config/firebase';\nimport { GET_USER_REQUEST, GET_USER_FAILURE, SET_USER_REQUEST, SET_USER_SUCCESS, SET_USER_FAILURE, CLEAR_USER_ERRORS } from '../actions/user';\nimport { authRequestWithDispatch } from '../actions/api';\n// export const getCurrentUser = () => {\n//     return (dispatch: AppDispatch) => {\n//         return authRequestWithDispatch({\n//             dispatch,\n//             endpoint: 'get_current_user',\n//             types: [GET_USER_REQUEST, GET_USER_SUCCESS, GET_USER_FAILURE],\n//         })\n//     }\n// }\n\nexport const signUpApp = (email, password) => {\n  return async dispatch => {\n    dispatch({\n      type: SET_USER_REQUEST\n    });\n    try {\n      const userPromise = await createUserWithEmailAndPassword(auth, email, password);\n      const user = userPromise.user;\n      const newUser = {\n        // PERSONAL INFO\n        firstName: \"\",\n        lastName: \"\",\n        // CONTACT INFO\n        email: email,\n        password: password,\n        phone: \"\",\n        // ADDRESS INFO\n        address: \"\",\n        city: \"\",\n        state: \"\",\n        country: \"\",\n        zipcode: \"\",\n        // USER INFO\n        totalSpent: 0,\n        numPurchases: 0,\n        purchases: [],\n        // MISC\n        id: user.uid,\n        onboarded: false,\n        userSince: new Date().toISOString()\n      };\n      console.log(newUser.userSince);\n      await updateProfile(userPromise.user, {\n        displayName: email\n      });\n      dispatch({\n        type: SET_USER_SUCCESS,\n        payload: user\n      });\n    } catch (err) {\n      dispatch({\n        type: SET_USER_FAILURE,\n        payload: {\n          message: err.message,\n          status: 500\n        }\n      });\n      return;\n    }\n    return authRequestWithDispatch({\n      dispatch,\n      endpoint: 'createUser',\n      method: 'POST',\n      types: [SET_USER_REQUEST, SET_USER_SUCCESS, SET_USER_FAILURE],\n      data: {\n        email,\n        onboarded: false\n      }\n    });\n  };\n};\nexport const signInApp = (email, password) => {\n  return async dispatch => {\n    dispatch({\n      type: GET_USER_REQUEST\n    });\n    try {\n      await signInWithEmailAndPassword(auth, email, password);\n    } catch (err) {\n      dispatch({\n        type: GET_USER_FAILURE,\n        payload: {\n          message: err.message,\n          status: 500\n        }\n      });\n    }\n    return;\n  };\n};\nexport const signOutApp = () => {\n  return async dispatch => {\n    dispatch({\n      type: SET_USER_REQUEST,\n      payload: undefined\n    });\n    try {\n      await signOut(auth);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n};\nexport const sendPassResetEmail = email => {};\nexport const updateEmail = email => {};\nexport const updatePassword = password => {};\nexport const resetUserErrors = () => {\n  return dispatch => {\n    dispatch({\n      type: CLEAR_USER_ERRORS\n    });\n  };\n};","map":{"version":3,"names":["updateProfile","signInWithEmailAndPassword","createUserWithEmailAndPassword","signOut","auth","GET_USER_REQUEST","GET_USER_FAILURE","SET_USER_REQUEST","SET_USER_SUCCESS","SET_USER_FAILURE","CLEAR_USER_ERRORS","authRequestWithDispatch","signUpApp","email","password","dispatch","type","userPromise","user","newUser","firstName","lastName","phone","address","city","state","country","zipcode","totalSpent","numPurchases","purchases","id","uid","onboarded","userSince","Date","toISOString","console","log","displayName","payload","err","message","status","endpoint","method","types","data","signInApp","signOutApp","undefined","error","sendPassResetEmail","updateEmail","updatePassword","resetUserErrors"],"sources":["/Users/zacharywolfe/Desktop/Clickit/clickit/src/authentication/firebase.ts"],"sourcesContent":["import {\n    updateProfile,\n    signInWithEmailAndPassword,\n    createUserWithEmailAndPassword,\n    signOut,\n    sendPasswordResetEmail,\n    getAuth,\n} from 'firebase/auth'\nimport { auth } from '../config/firebase'\nimport { AppDispatch } from '../store'\nimport {\n    GET_USER_REQUEST,\n    GET_USER_SUCCESS,\n    GET_USER_FAILURE,\n\n    SET_USER_REQUEST,\n    SET_USER_SUCCESS,\n    SET_USER_FAILURE,\n    \n    CLEAR_USER_ERRORS,\n} from '../actions/user'\nimport { authRequestWithDispatch } from '../actions/api'\nimport { User } from '../reducers/user'\n\n// export const getCurrentUser = () => {\n//     return (dispatch: AppDispatch) => {\n//         return authRequestWithDispatch({\n//             dispatch,\n//             endpoint: 'get_current_user',\n//             types: [GET_USER_REQUEST, GET_USER_SUCCESS, GET_USER_FAILURE],\n//         })\n//     }\n// }\n\nexport const signUpApp = (\n    email: string,\n    password: string,\n) => {\n    return async (dispatch: AppDispatch) => {\n        dispatch({ \n            type: SET_USER_REQUEST \n        })\n        try {\n            const userPromise = await createUserWithEmailAndPassword(\n                auth,\n                email,\n                password,\n            )\n\n            const user = userPromise.user\n            const newUser: User = {\n                // PERSONAL INFO\n                firstName: \"\",\n                lastName: \"\",\n\n                // CONTACT INFO\n                email: email,\n                password: password,\n                phone: \"\",\n\n                // ADDRESS INFO\n                address: \"\",\n                city: \"\",\n                state: \"\",\n                country: \"\",\n                zipcode: \"\",\n\n                // USER INFO\n                totalSpent: 0,\n                numPurchases: 0,\n                purchases: [],\n\n                // MISC\n                id: user.uid,\n                onboarded: false,\n                userSince: (new Date().toISOString()),\n            }\n\n            console.log (newUser.userSince)\n\n            await updateProfile(\n                userPromise.user, \n                { displayName: email }\n            )\n\n            dispatch ({\n                type: SET_USER_SUCCESS,\n                payload: user,\n            })\n        } catch (err: any) {\n            dispatch({\n                type: SET_USER_FAILURE,\n                payload: {\n                    message: err.message,\n                    status: 500,\n                },\n            })\n            return\n        }\n\n        return authRequestWithDispatch({\n            dispatch,\n            endpoint: 'createUser',\n            method: 'POST',\n            types: [SET_USER_REQUEST, SET_USER_SUCCESS, SET_USER_FAILURE],\n            data: {\n                email,\n                onboarded: false,\n            },\n        })\n    }\n}\n\nexport const signInApp = (email: string, password: string) => {\n    return async (dispatch: AppDispatch) => {\n        dispatch({ type: GET_USER_REQUEST })\n        try {\n            await signInWithEmailAndPassword(auth, email, password)\n        } catch (err: any) {\n            dispatch({\n                type: GET_USER_FAILURE,\n                payload: {\n                    message: err.message,\n                    status: 500,\n                },\n            })\n        }\n        return\n    }\n}\n\nexport const signOutApp = () => {\n    return async (dispatch: AppDispatch) => {\n        dispatch({\n            type: SET_USER_REQUEST,\n            payload: undefined,\n        })\n        try {\n            await signOut(auth)\n        } catch (error: any) {\n            console.error(error)\n        }\n    }\n}\n\nexport const sendPassResetEmail = (email: string) => {}\n\nexport const updateEmail = (email: string) => {}\n\nexport const updatePassword = (password: string) => {}\n\nexport const resetUserErrors = () => {\n    return (dispatch: AppDispatch) => {\n        dispatch({ type: CLEAR_USER_ERRORS })\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}